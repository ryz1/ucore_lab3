Report for Lab3
计34 茹逸中 2013011375

**练习1：**

实现过程：

找到地址addr对应的页表项，如果页表项值为0，则使用pgdir_alloc_page函数为其分配物理地址。

请描述页目录项（Pag Director Entry）和页表（Page Table Entry）中组成部分对ucore实现页替换算法的潜在用处。

PTE_P(第0位) 0x001 表示物理页是否存在 用来判断在访问时是否需要为其分配物理内存。

PTE_PWT（第4位） 0x008 表示是否为写达 用来控制写内存中的页时是否修改硬盘中的该页

PTE_D（第7位） 0x040 表示是否脏页 如果是脏页，在替换时需要更新。

如果ucore的缺页服务例程在执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情？

硬件需要保存当前的运行现场（包括各寄存器的值），然后将pc跳转到中断服务例程的开始指针。

**练习2：**

如果要在ucore上实现"extended clock页替换算法"请给你的设计方案，现有的swap_manager框架是否足以支持在ucore中实现此算法？如果是，请给你的设计方案。如果不是，请给出你的新的扩展和基此扩展的设计方案。并需要回答如下问题

可以支持此算法。
每一页上有一个PTE_A标志位，表示最近是否被访问，在该页被访问时会其置为1。
每次需要替换出页时，循环搜索链表，找到第一个最近未被访问且不是脏页的页替换出去。如果找不到，开始第二轮搜索，将标记为1的页标记置为0，并找到第一个标记为0的页置换出去。

◦需要被换出的页的特征是什么？

需要换出的页是最近未被访问过的页。

◦在ucore中如何判断具有这样特征的页？

PTE_A = 0即最近未被访问。

◦何时进行换入和换出操作？

需要访问的页不在内存中时，需要将该页从硬盘中换入。如果使用的内存满了，则需要选择一页换出。

**实验中用到的知识：**

虚拟内存和物理内存的映射关系，页替换的概念，FIFO页替换算法